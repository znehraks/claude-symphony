# claude-symphony Output Validation Configuration
# Stage output verification and quality assurance

validation:
  enabled: true
  description: "스테이지별 산출물 검증 및 품질 보증"

  # 스테이지별 검증 규칙
  per_stage:
    "01-brainstorm":
      description: "아이디어 및 요구사항 산출물 검증"

      required_outputs:
        ideas.md:
          exists: true
          min_size_bytes: 500
          content_checks:
            min_ideas: 5
            has_sections: ["아이디어 목록", "평가 기준"]

        requirements_analysis.md:
          exists: true
          min_size_bytes: 1000
          content_checks:
            sections:
              - "기능 요구사항"
              - "비기능 요구사항"
            has_priorities: true

      validation_commands: []

      quality_metrics:
        idea_diversity: 0.7  # 아이디어 다양성 점수
        requirement_completeness: 0.8

    "02-research":
      description: "리서치 산출물 검증"

      required_outputs:
        tech_research.md:
          exists: true
          min_size_bytes: 2000
          content_checks:
            has_sources: true
            min_sources: 3

        feasibility_report.md:
          exists: true
          content_checks:
            sections:
              - "기술적 타당성"
              - "리스크 분석"
              - "결론"

      validation_commands: []

      quality_metrics:
        source_quality: 0.8
        analysis_depth: 0.7

    "03-planning":
      description: "계획 산출물 검증"

      required_outputs:
        architecture.md:
          exists: true
          min_size_bytes: 2000
          content_checks:
            has_diagrams: true
            sections:
              - "시스템 구조"
              - "컴포넌트 설계"
              - "데이터 흐름"

        tech_stack.md:
          exists: true
          content_checks:
            has_justification: true

        project_plan.md:
          exists: true
          content_checks:
            has_timeline: true
            has_milestones: true

      validation_commands: []

    "04-ui-ux":
      description: "UI/UX 설계 산출물 검증"

      required_outputs:
        wireframes.md:
          exists: true
          content_checks:
            min_screens: 3

        user_flows.md:
          exists: true
          content_checks:
            has_flow_diagram: true

        design_system.md:
          exists: true
          content_checks:
            sections:
              - "색상"
              - "타이포그래피"
              - "컴포넌트"

      validation_commands: []

    "05-task-management":
      description: "태스크 관리 산출물 검증"

      required_outputs:
        tasks.md:
          exists: true
          content_checks:
            min_tasks: 10
            has_estimates: true
            has_priorities: true

        sprint_plan.md:
          exists: true
          content_checks:
            has_sprint_goals: true

      validation_commands: []

    "06-implementation":
      description: "구현 산출물 검증"

      required_outputs:
        "source_code/":
          exists: true
          is_directory: true

        implementation_log.md:
          exists: true
          format: "changelog"

      validation_commands:
        - name: "lint"
          command: "npm run lint"
          required: true
          allow_warnings: true

        - name: "typecheck"
          command: "npm run typecheck"
          required: true

        - name: "build"
          command: "npm run build"
          required: true

      quality_metrics:
        lint_score: 0.9
        type_coverage: 0.95

    "07-refactoring":
      description: "리팩토링 산출물 검증"

      required_outputs:
        "refactored_code/":
          exists: true
          is_directory: true

        refactoring_report.md:
          exists: true
          content_checks:
            sections:
              - "변경 사항"
              - "개선 내용"
              - "성능 비교"

      validation_commands:
        - name: "lint"
          command: "npm run lint"
          required: true

        - name: "test"
          command: "npm run test"
          required: true

      quality_metrics:
        complexity_improvement: true
        no_regression: true

    "08-qa":
      description: "QA 산출물 검증"

      required_outputs:
        qa_report.md:
          exists: true
          content_checks:
            sections:
              - "발견된 이슈"
              - "해결된 이슈"
              - "품질 평가"

        bug_fixes.md:
          exists: true
          content_checks:
            has_bug_list: true

      validation_commands:
        - name: "lint"
          command: "npm run lint"
          required: true

        - name: "test"
          command: "npm run test"
          required: true

      quality_metrics:
        bug_resolution_rate: 0.9

    "09-testing":
      description: "테스트 산출물 검증"

      required_outputs:
        "tests/":
          exists: true
          is_directory: true

        test_report.md:
          exists: true
          content_checks:
            pass_rate_min: 100

        coverage_report.md:
          exists: true
          content_checks:
            coverage_min: 80

      validation_commands:
        - name: "test"
          command: "npm run test"
          required: true

        - name: "coverage"
          command: "npm run test:coverage"
          required: true
          threshold:
            lines: 80
            branches: 75
            functions: 80

      quality_metrics:
        test_coverage: 0.8
        all_tests_pass: true

    "10-deployment":
      description: "배포 산출물 검증"

      required_outputs:
        ".github/workflows/":
          exists: true
          is_directory: true

        "deployment_config/":
          exists: true
          is_directory: true

        deployment_log.md:
          exists: true

      validation_commands:
        - name: "workflow_validate"
          command: "gh workflow list"
          required: false

      quality_metrics:
        ci_configured: true
        deployment_documented: true

# 검증 프로세스
validation_process:
  steps:
    - name: "check_required_files"
      description: "필수 파일 존재 확인"
      required: true

    - name: "validate_file_content"
      description: "파일 내용 검증"
      required: true

    - name: "run_validation_commands"
      description: "검증 명령어 실행"
      required: false

    - name: "calculate_quality_score"
      description: "품질 점수 계산"
      required: false

    - name: "generate_report"
      description: "검증 리포트 생성"
      required: true

  on_failure:
    action: "block_transition"
    allow_override: true
    require_justification: true

# 리포트 설정
reporting:
  format: "markdown"
  output_path: "state/validations/"

  include:
    - validation_summary
    - file_checks
    - command_results
    - quality_scores
    - recommendations

  severity_levels:
    error:
      description: "스테이지 전환 차단"
      icon: "❌"
    warning:
      description: "경고만 표시"
      icon: "⚠️"
    info:
      description: "정보 제공"
      icon: "ℹ️"
    pass:
      description: "검증 통과"
      icon: "✅"

# 자동 수정 제안
auto_fix:
  enabled: true
  suggest_fixes: true
  auto_apply: false

  fixable_issues:
    - missing_sections
    - format_errors
    - lint_errors

# 통합 설정
integration:
  handoff:
    include_validation_status: true
    block_if_failed: true

  checkpoint:
    save_validation_results: true

  memory:
    save_quality_trends: true
