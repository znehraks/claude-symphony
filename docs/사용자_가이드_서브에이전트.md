# Sub-Agent 시스템 사용자 가이드

## 개요

이 문서는 claude-symphony에 도입된 **서브 에이전트(Sub-Agent)** 시스템이 사용자 경험을 어떻게 개선하는지 설명합니다.

**핵심 메시지**: 명령어는 그대로, 하지만 더 똑똑하고 효율적으로 동작합니다.

---

## Sub-Agent란?

**Sub-Agent**는 특수 작업을 별도의 독립된 컨텍스트에서 수행하는 AI 에이전트입니다.
메인 세션과 분리되어 실행되므로, 여러분의 작업 컨텍스트를 보존할 수 있습니다.

### 비유

식당에서 요리를 한다고 상상해보세요:

**Before (v0.2.12 이전)**
```
주방장(메인 세션)이 모든 일을 직접 처리:
- 요리 준비 ✓
- 재료 검수 ✓ (시간과 에너지 소비)
- 설거지 ✓
- 청소 ✓
→ 주방장 체력 빠르게 소진
```

**After (v0.2.14+)**
```
주방장(메인 세션)은 요리에 집중:
- 요리 준비 ✓

보조 스태프(Sub-Agent)가 검수 담당:
- 재료 검수 ✓ (별도 공간에서)

→ 주방장 체력 보존, 더 많은 요리 가능
```

---

## 사용자가 알아야 할 핵심 내용

### 1. 명령어는 바뀌지 않았습니다

```bash
# Before (v0.2.12 이전)
$ /validate

# After (v0.2.14+)
$ /validate   # 동일한 명령어
```

사용 방법은 완전히 동일합니다. 새로운 명령어를 배울 필요가 없습니다.

---

### 2. 내부적으로 더 똑똑해졌습니다

#### Before: 메인 세션에서 직접 검증

```
사용자: /validate
  ↓
메인 세션이 직접 파일 체크
  ↓
메인 컨텍스트 5-8% 소비
  ↓
결과 출력 (콘솔에만 표시)
  ↓
스크롤하면 결과 사라짐
```

#### After: 별도 Agent가 검증

```
사용자: /validate
  ↓
Validation Agent 생성 (독립된 컨텍스트)
  ↓
Agent가 파일 체크 + AI 추론
  ↓
메인 컨텍스트 0% 소비 ✨
  ↓
결과 출력 + JSON 파일로 저장
  ↓
언제든지 다시 확인 가능
```

---

### 3. 실제 사용 예시

#### 예시 1: 일반적인 검증 (성공)

```bash
$ /validate

🤖 Validation Agent를 실행합니다...
✅ 검증 완료

결과 요약:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
  통과: 8/8 checks
  실패: 0/8 checks
  점수: 1.0/1.0
  상태: 전환 준비 완료 ✨
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

검증된 파일:
  ✓ ideas.md (2.4 KB)
  ✓ requirements_analysis.md (3.1 KB)
  ✓ tech_stack_recommendations.md (1.8 KB)
  ✓ project_structure.md (2.2 KB)
  ✓ risk_assessment.md (1.5 KB)
  ✓ initial_timeline.md (1.1 KB)
  ✓ stakeholder_identification.md (900 bytes)
  ✓ success_criteria.md (1.3 KB)

📁 상세 결과: state/validations/01-brainstorm_20260128_143000.json

/next 명령어로 다음 단계로 진행할 수 있습니다.
```

---

#### 예시 2: 검증 실패 (문제 발견)

```bash
$ /validate

🤖 Validation Agent를 실행합니다...
⚠️ 문제 발견

결과 요약:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
  통과: 6/8 checks
  실패: 2/8 checks
  점수: 0.75/1.0
  상태: 차단됨 (수정 필요) ⚠️
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

반드시 수정해야 할 문제:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

1. ideas.md
   ✗ 내용 부족 (300 bytes < 500 bytes 요구사항)

   AI 분석:
   브레인스토밍한 아이디어들이 충분히 구체적이지 않습니다.
   각 아이디어에 다음 내용이 포함되어야 합니다:

   - 문제 정의 (어떤 사용자 불편을 해결하나요?)
   - 제안 솔루션 (기술적 접근 방법)
   - 예상 복잡도 (간단함/보통/복잡함)
   - 성공 지표 (어떻게 측정하나요?)

   현재 각 아이디어가 1-2문장입니다. 1-2단락으로 확장해주세요.

2. requirements_analysis.md
   ✗ 필수 섹션 누락: "비기능 요구사항"

   AI 분석:
   기능 요구사항은 잘 정의되어 있지만, 시스템 품질 요구사항이
   명시되지 않았습니다. 다음 섹션을 추가해주세요:

   ## 비기능 요구사항
   - 성능 (목표 응답시간, 처리량)
   - 보안 (인증, 권한, 데이터 보호)
   - 확장성 (예상 사용자 증가, 데이터 규모)
   - 안정성 (가동시간 목표, 오류 처리)
   - 유지보수성 (코드 품질, 문서화 기준)

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

📁 상세 결과: state/validations/01-brainstorm_20260128_143000.json

위 문제를 수정한 후 /next 명령어를 실행해주세요.
```

---

#### 예시 3: Agent 실패 → 자동 대체

```bash
$ /validate

🤖 Validation Agent를 실행합니다...
⚠️ Agent 실행 실패 (30초 타임아웃)
🔄 기존 방식으로 자동 전환합니다...

✅ 검증 완료 (기존 방식)

결과 요약:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
  통과: 6/8 checks
  실패: 2/8 checks
  점수: 0.75/1.0
  상태: 차단됨 ⚠️
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

문제:
  ✗ ideas.md: 파일 크기 부족 (300 < 500 bytes)
  ✗ requirements_analysis.md: "비기능" 섹션 누락

참고: Agent를 사용할 수 없어 기존 방식을 사용했습니다.
결과는 정확하지만 상세한 AI 분석은 포함되지 않습니다.

위 문제를 수정한 후 /next 명령어를 실행해주세요.
```

> 💡 **중요**: Agent가 실패해도 항상 검증 결과를 받을 수 있습니다!

---

## 상세 비교: Before vs After

### /validate 명령어 동작

| 항목 | Before (v0.2.12) | After (v0.2.14+) |
|------|------------------|------------------|
| **명령어** | `/validate` | `/validate` (동일) |
| **실행 방식** | 메인 세션에서 직접 | Validation Agent (별도 컨텍스트) |
| **컨텍스트 영향** | 5-8% 소비 | 0% 영향 ✨ |
| **검증 품질** | 파일 체크 + 명령어 | AI 추론 + 파일 체크 + 명령어 |
| **결과 형식** | 콘솔 출력만 | 콘솔 + JSON 파일 저장 |
| **분석 깊이** | "파일 작음" | "왜 작은지" + "무엇이 빠졌는지" |
| **실패 시** | 에러 표시 | 자동으로 기존 방식 사용 |
| **이력 관리** | 없음 | 자동 저장 및 조회 가능 |

---

### Stage 전환 워크플로우

**Before v0.2.14:**
```
사용자: /next 입력
  ↓
HANDOFF.md 존재 확인
  ↓
메인 세션에서 검증 실행
  ↓  [메인 컨텍스트 5-8% 사용]
  ↓
통과 → 다음 Stage
실패 → 차단
```

**After v0.2.14:**
```
사용자: /next 입력
  ↓
HANDOFF.md 존재 확인
  ↓
Validation Agent 생성 (독립 컨텍스트)
  ↓  [메인 컨텍스트 0% 사용]
  ↓  [Agent 실패 시 → 자동으로 기존 방식]
  ↓
통과 → 다음 Stage
실패 → 차단
```

---

## 사용자 혜택 상세 설명

### 혜택 1: 컨텍스트 보존

#### 실제 시나리오

Stage 06 구현 단계에서 열심히 코딩 중이고, 컨텍스트가 45% 남았습니다.

**Before (v0.2.12 이전)**
```
코딩 중: 컨텍스트 45% 남음
  ↓
중간 점검을 위해 /validate 실행
  ↓
검증 작업이 메인 세션에서 실행됨
  ↓
컨텍스트 5-8% 소비
  ↓
결과: 37-40% 남음 ⚠️
  ↓
조금 더 작업하면 /clear 필요할 수도...
```

**After (v0.2.14+)**
```
코딩 중: 컨텍스트 45% 남음
  ↓
중간 점검을 위해 /validate 실행
  ↓
Validation Agent가 별도 컨텍스트에서 실행
  ↓
메인 세션 컨텍스트 영향 없음
  ↓
결과: 45% 그대로! ✨
  ↓
계속 작업 가능, 걱정 없음!
```

#### 실제 숫자로 보기

| 작업 | Before 컨텍스트 사용 | After 컨텍스트 사용 |
|------|---------------------|-------------------|
| 코딩 (1시간) | 20% | 20% |
| /validate (1회) | 5-8% | 0% ✨ |
| 코딩 계속 | 15% | 15% |
| /validate (2회) | 5-8% | 0% ✨ |
| **총 사용량** | **45-51%** | **35%** |
| **차이** | - | **10-16% 절약** |

**결론**: 같은 작업을 하면서도 컨텍스트를 10-16% 더 절약할 수 있습니다!

---

### 혜택 2: 검증 이력 저장

#### Before: 결과가 사라짐

```bash
$ /validate
✅ 검증 완료
   - ideas.md: ✓
   - requirements_analysis.md: ✗ (너무 작음)

# 다른 작업을 하다가...
# "아, 아까 뭐가 실패했더라?"
# → 기억 안 남, 다시 /validate 실행해야 함
```

#### After: 자동 저장 및 이력 조회

```bash
$ /validate
✅ 검증 완료
   - 상세 결과: state/validations/01-brainstorm_20260128_143000.json

# 나중에 확인하고 싶을 때
$ ls state/validations/
01-brainstorm_20260128_143000.json  # 첫 번째 검증
01-brainstorm_20260128_154500.json  # 두 번째 검증
03-planning_20260128_163000.json    # Stage 03 검증

# 특정 결과 자세히 보기
$ cat state/validations/01-brainstorm_20260128_143000.json | jq '.'
{
  "timestamp": "2026-01-28T14:30:00Z",
  "stage": "01-brainstorm",
  "passed": 6,
  "failed": 2,
  "score": 0.75,
  "checks": [
    {
      "file": "ideas.md",
      "status": "failed",
      "reason": "내용 부족 (300 < 500 bytes)",
      "suggestion": "기술적 세부사항과 위험 평가 추가"
    }
  ]
}

# 진행 상황 추적
$ for file in state/validations/01-*.json; do
    score=$(jq -r '.score' "$file")
    time=$(jq -r '.timestamp' "$file")
    echo "$time: $score"
  done

2026-01-28T14:30:00Z: 0.75
2026-01-28T15:45:00Z: 0.88
# 점수가 올라가는 것을 확인!
```

#### 실전 활용 사례

**케이스 1: 진행 상황 추적**
```bash
# 하루 종일 작업한 후 개선도 확인
$ for f in state/validations/01-*.json; do
    jq -r '"\(.timestamp): \(.passed)/\(.passed + .failed) passed"' "$f"
  done

2026-01-28T10:00:00Z: 4/8 passed  # 아침
2026-01-28T14:30:00Z: 6/8 passed  # 오후
2026-01-28T17:00:00Z: 8/8 passed  # 저녁 - 완료!
```

**케이스 2: 반복되는 문제 파악**
```bash
# 자주 실패하는 체크 찾기
$ jq -r '.checks[] | select(.status=="failed") | .file' \
    state/validations/*.json | sort | uniq -c | sort -nr

   3 requirements_analysis.md  # 3번 실패
   2 ideas.md                  # 2번 실패
   1 tech_stack.md             # 1번 실패

# requirements_analysis.md를 집중적으로 수정해야겠군요!
```

---

### 혜택 3: 지능형 분석

#### Before: 단순 체크

```bash
$ /validate

❌ 실패한 검사:
- ideas.md: 파일 크기 300 bytes (최소 500 bytes 필요)
- requirements_analysis.md: 섹션 누락
```

단순히 "작다", "없다"만 알려줌. 왜 그런지, 어떻게 고쳐야 하는지는 모름.

#### After: AI 기반 상세 분석

```bash
$ /validate

❌ 실패한 검사:

1. ideas.md: 내용 부족 (300 < 500 bytes)

   🤖 AI 분석:
   현재 아이디어들이 너무 간략합니다. 각 아이디어에 다음이 빠져있습니다:

   누락된 내용:
   - 구체적인 기술 접근 방법 (어떻게 구현할 것인가?)
   - 위험 평가 (어떤 문제가 발생할 수 있나?)
   - 필요한 리소스 (팀 규모, 시간, 기술)

   현재 상태:
   "사용자 인증 기능 추가" (1문장)

   개선 예시:
   "사용자 인증 기능 추가

   **기술 접근**:
   JWT 토큰 기반 인증을 사용하며, Access Token(15분)과
   Refresh Token(7일)을 분리하여 보안성을 높입니다.

   **예상 위험**:
   - Token 탈취 위험 → HTTPS 필수, HttpOnly 쿠키 사용
   - Refresh Token 관리 → Redis에 저장하여 즉시 무효화 가능

   **필요 리소스**:
   - Backend 개발자 1명 (3일)
   - 기술: Node.js, jsonwebtoken, Redis
   - 예상 복잡도: 보통"

2. requirements_analysis.md: 필수 섹션 누락

   🤖 AI 분석:
   기능 요구사항은 잘 정의되어 있습니다. 하지만 시스템이 "어떻게
   동작해야 하는지"에 대한 품질 요구사항이 없습니다.

   추가해야 할 섹션:

   ## 비기능 요구사항

   ### 성능
   - 페이지 로딩: 2초 이내
   - API 응답: 200ms 이내
   - 동시 사용자: 1000명 처리 가능

   ### 보안
   - 모든 통신 HTTPS
   - 비밀번호 bcrypt 해싱
   - SQL Injection 방어

   ### 확장성
   - 사용자 10배 증가 대응 가능
   - 데이터베이스 샤딩 고려

   ### 안정성
   - 99.9% 가동시간
   - 자동 에러 복구
   - 상세한 로깅
```

#### 비교 표

| 측면 | Before | After |
|------|--------|-------|
| **문제 설명** | "파일 작음" | "왜 작은지 구체적 분석" |
| **원인 파악** | 사용자가 직접 | AI가 분석 |
| **해결 방법** | 사용자가 고민 | AI가 제안 |
| **예시 제공** | 없음 | 구체적 예시 포함 |
| **맥락 이해** | 없음 | Stage와 목적 고려 |

---

### 혜택 4: 안전한 대체 (Graceful Degradation)

#### 시나리오: Agent 실행 실패

여러 이유로 Agent가 실행되지 않을 수 있습니다:
- 시스템 리소스 부족
- 타임아웃 (30초 초과)
- 내부 오류

**Before: 에러로 중단**
```bash
$ /validate

❌ Error: Validation failed
   Reason: Agent execution timeout

# 검증 결과를 받을 수 없음
# 사용자가 직접 해결해야 함
```

**After: 자동 대체**
```bash
$ /validate

🤖 Validation Agent를 실행합니다...
⚠️ Agent 실행 실패 (30초 타임아웃)
🔄 기존 검증 방식으로 자동 전환합니다...

✅ 검증 완료 (기존 방식)

결과:
  통과: 6/8 checks
  실패: 2/8 checks

참고: Agent를 사용할 수 없어 기존 방식을 사용했습니다.
결과는 여전히 정확하지만, 상세한 AI 분석은 포함되지 않습니다.
```

#### 대체 흐름도

```
/validate 실행
  ↓
Validation Agent 시도
  ↓
성공? ━━━━ YES → Agent 검증 (AI 분석 포함)
  ↓
 NO
  ↓
자동으로 기존 방식 사용
  ↓
기본 검증 (파일 체크만)
  ↓
결과 반환 (항상 성공)
```

**보장 사항**:
- ✅ 항상 검증 결과를 받을 수 있습니다
- ✅ Agent 실패가 작업을 막지 않습니다
- ✅ 사용자는 아무 조치 없이 계속 진행 가능

---

## 언제 /validate를 사용하나요?

### 권장 시점 ✅

| 상황 | 이유 | 예시 |
|------|------|------|
| **Stage 전환 전** | 요구사항 충족 확인 | `/next` 전에 `/validate` |
| **주요 산출물 완성 후** | 완성도 검증 | `architecture.md` 작성 완료 후 |
| **중간 점검** | 진행 방향 확인 | 하루 작업 마무리 시 |
| **불확실할 때** | 올바른 방향인지 확인 | "이 정도면 충분할까?" |

#### 실전 예시

```bash
# 시나리오 1: Stage 01 작업 중
$ # ideas.md 작성 완료
$ /validate
⚠️ ideas.md 내용 부족
$ # 수정...
$ /validate
✅ 통과!
$ /next  # 안심하고 전환

# 시나리오 2: 하루 작업 마무리
$ # 오늘 작업한 내용 점검
$ /validate
⚠️ 2개 문제 발견
$ # 내일 출근하면 이것부터 고치자

# 시나리오 3: 막막할 때
$ # "지금까지 잘하고 있는 걸까?"
$ /validate
✅ 7/8 통과, 거의 다 됨!
$ # 동기부여 받음 💪
```

---

### 사용하지 않아도 되는 시점 ❌

| 상황 | 이유 | 대신 할 일 |
|------|------|-----------|
| **작업 진행 중** | Stage 전환 시 자동 검증됨 | 계속 작업 |
| **방금 통과한 직후** | 바로 다시 실패할 일 없음 | 다음 작업 |
| **자잘한 수정마다** | 과도한 검증은 시간 낭비 | 주요 변경 시만 |
| **Stage 중간** | 아직 완성 전임 | 마무리 후 검증 |

#### 과도한 사용 예시 (비추천)

```bash
# ❌ 너무 자주 검증 (비효율적)
$ echo "# Idea 1" >> ideas.md
$ /validate
$ echo "description" >> ideas.md
$ /validate
$ echo "more details" >> ideas.md
$ /validate

# ✅ 적절한 검증 (효율적)
$ # ideas.md 전체 작성
$ # requirements_analysis.md 작성
$ # tech_stack.md 작성
$ /validate  # 한 번에 검증
```

---

## 과거 검증 결과 확인하기

### 모든 검증 이력 보기

```bash
$ ls -lh state/validations/

-rw-r--r-- 1 user staff 2.1K 1월 28 14:30 01-brainstorm_20260128_143000.json
-rw-r--r-- 1 user staff 1.8K 1월 28 15:45 01-brainstorm_20260128_154500.json
-rw-r--r-- 1 user staff 2.4K 1월 28 16:30 03-planning_20260128_163000.json
```

### 특정 결과 상세 보기

```bash
$ cat state/validations/01-brainstorm_20260128_143000.json | jq '.'

{
  "timestamp": "2026-01-28T14:30:00Z",
  "stage": "01-brainstorm",
  "passed": 6,
  "failed": 2,
  "score": 0.75,
  "checks": [
    {
      "file": "ideas.md",
      "status": "failed",
      "reason": "내용 부족 (300 < 500 bytes)",
      "suggestion": "기술적 세부사항과 위험 평가를 추가하세요"
    },
    {
      "file": "requirements_analysis.md",
      "status": "failed",
      "reason": "섹션 누락: 비기능 요구사항",
      "suggestion": "성능, 보안, 확장성 섹션 추가"
    }
  ]
}
```

### 진행 상황 시각화

```bash
# 시간대별 점수 변화
$ for file in state/validations/*.json; do
    timestamp=$(jq -r '.timestamp' "$file")
    score=$(jq -r '.score' "$file")
    echo "$timestamp: $score"
  done

2026-01-28T10:00:00Z: 0.50
2026-01-28T14:30:00Z: 0.75
2026-01-28T17:00:00Z: 1.00

# 점수가 점점 올라가는 것을 확인!
```

### 가장 최근 결과 빠르게 보기

```bash
# 최신 결과 파일 찾기
$ latest=$(ls -t state/validations/*.json | head -1)

# 요약만 보기
$ jq '{stage, passed, failed, score}' "$latest"

{
  "stage": "01-brainstorm",
  "passed": 8,
  "failed": 0,
  "score": 1.0
}
```

---

## 설정 (선택사항)

### Sub-Agent 비활성화

대부분의 사용자는 Sub-Agent를 **활성화 상태로 유지**하는 것이 좋습니다.

하지만 필요한 경우 비활성화할 수 있습니다.

#### 비활성화 방법

`config/output_validation.yaml` 파일 수정:

```yaml
# config/output_validation.yaml
validation:
  use_agent: false  # 기존 방식으로 전환

  # Agent는 여전히 사용 가능하며, 기본값만 변경됨
```

#### 언제 비활성화하나요?

**비활성화 고려 상황**:
- Agent가 계속 타임아웃되는 경우
- AI 분석 없이 단순 체크만 원하는 경우
- 검증 로직을 디버깅하는 경우 (기존 방식이 더 단순)
- 시스템 리소스가 매우 제한적인 경우

**활성화 유지 권장** (기본값):
- 대부분의 사용자
- 컨텍스트 보존이 중요한 경우
- 상세한 분석과 제안이 필요한 경우
- 검증 이력 관리가 필요한 경우

#### 임시로 기존 방식 사용

설정을 바꾸지 않고 한 번만 기존 방식 사용:

```bash
# 이번에만 Agent 사용 (설정과 무관)
$ /validate --agent

# 이번에만 기존 방식 사용 (설정과 무관)
$ /validate --legacy
```

---

## 현재 사용 가능한 Sub-Agents

| Agent | 용도 | 자동 실행 시점 | 컨텍스트 영향 |
|-------|------|----------------|---------------|
| **validation-agent** | Stage 산출물 검증 | `/validate`, `/next` | 없음 (독립 실행) |

### 향후 추가 예정

다음 Sub-Agent들이 개발 중입니다:

| Agent | 용도 | 예상 효과 |
|-------|------|-----------|
| **synthesis-agent** | 병렬 AI 출력 통합 | Stage 01, 03, 04, 07, 09에서 여러 AI 결과 자동 통합 |
| **transition-agent** | Stage 전환 자동화 | HANDOFF 생성, 체크포인트 생성 자동화 |
| **checkpoint-agent** | 지능형 체크포인트 | 중요한 시점 자동 감지하여 체크포인트 생성 |

---

## 문제 해결

### Agent가 계속 타임아웃됨

```bash
$ /validate

🤖 Validation Agent를 실행합니다...
⚠️ Agent 실행 실패 (30초 타임아웃)
🔄 기존 방식으로 자동 전환합니다...
```

#### 해결 방법

**1. 시스템 리소스 확인**
```bash
# CPU, 메모리 사용량 확인
$ top
$ free -h
```

**2. 타임아웃 시간 늘리기**

`config/output_validation.yaml` 수정:
```yaml
agent:
  timeout: 60000  # 60초로 늘림 (기본값 30초)
```

**3. Agent 비활성화 (마지막 수단)**
```yaml
validation:
  use_agent: false  # 기존 방식 사용
```

---

### 결과가 저장되지 않음

```bash
$ /validate
✅ 검증 완료
# 하지만 state/validations/에 파일이 없음
```

#### 해결 방법

**1. 디렉토리 생성**
```bash
$ mkdir -p state/validations
$ chmod 755 state/validations
```

**2. 권한 확인**
```bash
$ ls -la state/
drwxr-xr-x 2 user staff 64 1월 28 14:30 validations
```

**3. 설정 확인**
```bash
$ cat config/output_validation.yaml | grep save_results
save_results: true  # true여야 함
```

---

### 더 상세한 출력 보고 싶음

```bash
# Verbose 모드로 실행
$ /validate --verbose

# 또는 저장된 JSON 파일의 전체 내용 확인
$ cat state/validations/$(ls -t state/validations/ | head -1) | jq '.'
```

---

### Agent와 기존 방식 결과가 다름

이것은 정상입니다:

| 항목 | Agent 방식 | 기존 방식 |
|------|-----------|-----------|
| **체크 기준** | 동일 | 동일 |
| **통과/실패** | 동일 | 동일 |
| **분석 깊이** | AI 추론 포함 | 기본 체크만 |
| **제안 품질** | 구체적 | 일반적 |

**결과**:
- 통과/실패 판정은 동일
- 실패 이유 설명과 제안만 다름

---

## 요약

### 바뀐 것 ✨

| 항목 | 변경 내용 |
|------|-----------|
| **실행 방식** | Agent가 독립 컨텍스트에서 실행 |
| **컨텍스트 효율** | 메인 세션 보존 (0% 사용) |
| **결과 저장** | JSON 파일로 자동 저장 |
| **분석 품질** | AI 기반 상세 분석 및 제안 |
| **안정성** | 자동 대체로 항상 동작 보장 |

### 바뀌지 않은 것 ✅

| 항목 | 내용 |
|------|------|
| **명령어** | `/validate` 그대로 |
| **사용 방법** | 동일한 워크플로우 |
| **검증 기준** | 동일한 요구사항 |
| **결과 형식** | 콘솔 출력 유사 |

### 핵심 혜택 🎯

1. **컨텍스트 보존** (10-16% 절약)
   - 메인 세션에 영향 없음
   - 더 오래 작업 가능
   - `/validate`를 자유롭게 사용

2. **검증 이력** (자동 저장)
   - 모든 결과 JSON으로 저장
   - 과거 결과 조회 가능
   - 진행 상황 추적

3. **지능형 분석** (AI 추론)
   - 단순히 "뭐가 문제"가 아닌 "왜 문제"
   - 구체적인 수정 제안
   - 예시 포함

4. **조치 불필요** (자동 동작)
   - 명령어 변경 없음
   - 새로운 학습 불필요
   - 자동으로 더 나은 경험

5. **항상 동작** (안전한 대체)
   - Agent 실패 시 자동 전환
   - 항상 검증 결과 제공
   - 작업 중단 없음

---

## 마무리

### 사용자에게 전하는 메시지

**아무것도 바꿀 필요가 없습니다.**

여러분은 평소처럼 `/validate` 명령어를 사용하면 됩니다.
하지만 이제는:

- 🎯 컨텍스트를 걱정 없이 검증할 수 있고
- 📊 과거 검증 결과를 언제든지 확인할 수 있고
- 🤖 AI가 왜 문제인지, 어떻게 고칠지 알려주고
- ✨ 실패해도 자동으로 대체되어 항상 결과를 받습니다

**핵심**: 더 똑똑하고, 더 효율적이고, 더 안전하게 동작합니다.

### 시작하기

1. 평소처럼 `/validate` 사용
2. `state/validations/` 디렉토리 확인해보기
3. 컨텍스트 절약 효과 체감하기
4. 더 자유롭게 검증하며 작업하기

### 도움이 필요한 경우

- Agent가 계속 실패하면: `use_agent: false`로 설정
- 더 자세한 출력 원하면: `/validate --verbose`
- 과거 결과 보고 싶으면: `ls state/validations/`

**문제가 있나요?**
GitHub Issues에 보고해주세요!
